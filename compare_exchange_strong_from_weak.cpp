// Let’s assume a system only oers compare_exchange_weak. Implement compare_exchange_strong on top of it.

tmp =  *expected;
bool success;

spurious failure {
    do {
        success = 
        spurious_fail = tmp;
        spurious
    } while(success && spurious_fail);
    return success;
}

int main(int argc, char const *argv[])
{
    /* code */
    return 0;
}
